<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<html>
<!-- Mirrored from docs.garagegames.com/tge/official/content/documentation/Engine/Reference/Simulation.html by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 06 Dec 2017 21:22:23 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<HEAD><SCRIPT SRC="../../../include/tutorial.js" LANGUAGE="JavaScript"></SCRIPT>
<SCRIPT SRC="../../../include/prototype.js" LANGUAGE="JavaScript"></SCRIPT>
<SCRIPT SRC="../../../include/scriptaculous.js" LANGUAGE="JavaScript"></SCRIPT>
<SCRIPT SRC="../../../include/glossaryLookUp.html" LANGUAGE="JavaScript"></SCRIPT>
<SCRIPT SRC="../../../include/referenceLookUp.html" LANGUAGE="JavaScript"></SCRIPT>
<SCRIPT SRC="../../../include/component.js" LANGUAGE="JavaScript"></SCRIPT>
<SCRIPT SRC="../../../include/componentContainer.html" LANGUAGE="JavaScript"></SCRIPT>
<SCRIPT>DocImagePath = "../../../index.html";</SCRIPT><link href="../../../include/tutorialStyles.css" rel="stylesheet" type="text/css" />
<link href="../../../include/tutorial.css" rel="stylesheet" type="text/css" />
<link href="../../../include/globalMainPageStyles.css" rel="stylesheet" type="text/css" />
<link href="../../../include/referenceThemeStyle.html" rel="stylesheet" type="text/css" />
<link href="../../../include/docTheme/theme.css" rel="stylesheet" type="text/css" />
<script>
   // this script chunk is to update the ToC to the current doc and expand it
   pageID = 1152;
   parent.leftFrame.expandToItem('tree2', 'doc1152');
   var element = parent.leftFrame.document.getElementById('doc1152');
   if((element) && (element.className==parent.leftFrame.nodeClosedClass))
{
   element.className = parent.leftFrame.nodeOpenClass
}
;
</script><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Torque: Torque: Simulation</title>
<link href="torque.css" rel="stylesheet" type="text/css">
</head>
<BODY id = "BODYID" onLoad = "initComponent()"  bgcolor="#ffffff" text="#000000" link="#333399" alink="#9999ff" vlink="#000066">
<div align="center">

<table width=700 cellspacing=0 cellpadding=10 border=0 bgcolor="#ffffff" summary="">
<tr><td align='right'>
<a href='index.html'><img src="tge_banner.gif" alt="torque" align="left" border=0></a>
<b>Torque Game Engine Documentation</b><br>
<small>TGE Version 1.5.2</small>
</td></tr>

<tr><td>

<table width='100%' height=24 border=0 cellpadding=0 cellspacing=0>
<tr height=24><td nowrap class="menu" align='center'>

<a href="index.html">Torque Home</a> &nbsp;
<a href="hierarchy.html">Class Hierarchy</a> &nbsp;
<a href="annotated.html">Data Structures</a> &nbsp;
<!--a href="functions.php">Data Fields</a -->
<a href="namespaces.html">Namespaces</a> &nbsp;
<a href="namespacemembers.html">Namespace Members</a> &nbsp;
<a href="files.html">File List</a> &nbsp;
<a href="globals.html">Globals</a>

</td></tr>
</table>

</td></tr>
<tr><td>

<!-- Generated by Doxygen 1.5.2 -->
<h1><a class="anchor" name="Simulation"></a><a name = "HeaderLink0"></a>Simulation</h1><h2><a class="anchor" name="SimOver"></a><a name = "HeaderLink1"></a>Overview</h2>
<h3><a class="anchor" name="SimOverIntroduction"></a><a name = "HeaderLink2"></a>Introduction</h3>
The simulation of objects is handled almost entirely in the game portion of the engine. All simulation object classes are derived from <a class="el" href="classGameBase.html" title="Base class for game objects which use datablocks, networking, are editable, and need...">GameBase</a>, which is a subclass of <a class="el" href="classSceneObject.html" title="A 3D object.">SceneObject</a>. <a class="el" href="classGameBase.html" title="Base class for game objects which use datablocks, networking, are editable, and need...">GameBase</a> objects that wish to be notified of the passage of time can be added to one of the two process lists - the global server or global client process list, depending on whether the object is a server object or a client ghost.<p>
All objects in the process list are "ticked" once every 32 milliseconds. The ordering of the objects is determined by the <a class="el" href="classGameBase.html#a740d99e7275b92196ec19c98ecab9c8" title="Force this object to process after some other object.">GameBase::processAfter</a> method, which is called if an object must be processed at some time after another object (not necessarily immediately afterward). For example, a player mounted to a vehicle would be set to processAfter the vehicle, so that after the vehicle moved the player's position could be updated to the correct position on the vehicles new position.<h3><a class="anchor" name="SimOverDetails"></a><a name = "HeaderLink3"></a>Update Interfaces</h3>
Game objects are updated in three separate functions, overridden from <a class="el" href="classGameBase.html" title="Base class for game objects which use datablocks, networking, are editable, and need...">GameBase</a>: <a class="el" href="classGameBase.html#77ca7fa3b5b34458d48af4b8fac25747" title="Processes a move event and updates object state once every 32 milliseconds.">GameBase::processTick()</a>, which takes a single <a class="el" href="structMove.html">Move</a> structure as an argument (it may be NULL) and advances the object in time by one 32 ms tick, <a class="el" href="classGameBase.html#0de47f8d38c42b181c8b00dc28a0f1cb" title="Interpolates between tick events.">GameBase::interpolateTick()</a>, which interpolates a client object backwards from the end of its current tick to the present time, and <a class="el" href="classGameBase.html#12e7dc808a013ce6506eea232f67266d" title="Advances simulation time for animations.">GameBase::advanceTime()</a>, which allows a client object to advance animations and effects by the full duration of the time event.<p>
Server side objects are only simulated on even tick boundaries, but client objects, in order to present a smooth view when the frame rate is high, are simulated after each time event. <a class="el" href="classGameBase.html#77ca7fa3b5b34458d48af4b8fac25747" title="Processes a move event and updates object state once every 32 milliseconds.">GameBase::processTick</a> is still only invoked on even tick boundaries, but at the end of the time advance, objects are essentially rewound by the time difference to the end of the tick. Also, client objects that need to animate only by the total elapsed time can do so in the <a class="el" href="classGameBase.html#12e7dc808a013ce6506eea232f67266d" title="Advances simulation time for animations.">GameBase::advanceTime</a> function, which is only called once per time advancement.<p>
<dl class="note" compact><dt><b>Note:</b></dt><dd>If the control object is sent new object state from the server, it will be advanced by every <a class="el" href="structMove.html">Move</a> the client has recorded that the server has not yet acknowledged - this is because the server has old data as far as the client is concerned, so the client skips forward through all the new data it knows about.</dd></dl>
<h2><a class="anchor" name="SimBase"></a><a name = "HeaderLink4"></a>Simulation Objects</h2>
SimBase (engine/console/simBase.*) defines the foundation <a class="el" href="classSimObject.html" title="Base class for objects involved in the simulation.">SimObject</a> classes that form the basis of the simulation engine.<p>
<a class="el" href="classSimObject.html" title="Base class for objects involved in the simulation.">SimObject</a> is the base class for all objects that the console language can create and manipulate. All game classes (<a class="el" href="classPlayer.html">Player</a>, <a class="el" href="classInteriorInstance.html">InteriorInstance</a>, Terrain, etc.) and GUI classes (<a class="el" href="classGuiCanvas.html" title="A canvas on which rendering occurs.">GuiCanvas</a>, <a class="el" href="classGuiControl.html" title="Root class for all GUI controls in Torque.">GuiControl</a>, etc). are all derived from <a class="el" href="classSimObject.html" title="Base class for objects involved in the simulation.">SimObject</a>. <a class="el" href="classSimObject.html" title="Base class for objects involved in the simulation.">SimObject</a> maintains the list of dynamic fields, has name and ID properties, and can register itself with a global object manager, as well as providing several other services.<p>
A <a class="el" href="classSimSet.html" title="A set of SimObjects.">SimSet</a> is a simple collection of SimObjects. The set has console methods for adding and removing objects and iterating through the set.<p>
A <a class="el" href="classSimGroup.html" title="A group of SimObjects.">SimGroup</a> is a derivative of <a class="el" href="classSimSet.html" title="A set of SimObjects.">SimSet</a> that "owns" the objects in its collection. When a <a class="el" href="classSimGroup.html" title="A group of SimObjects.">SimGroup</a> object is destroyed, it destroys all of its members. <a class="el" href="classGuiControl.html" title="Root class for all GUI controls in Torque.">GuiControl</a> is derived from <a class="el" href="classSimGroup.html" title="A group of SimObjects.">SimGroup</a> - thus making the GUI a hierarchal set of objects.<p>
<a class="el" href="classSimEvent.html" title="Represents a queued event in the sim.">SimEvent</a> is a special class objects can use to send time-delayed messages to objects.<p>
SimManager (engine/console/simManager.cc) is a collection of functions for managing all of the objects and events in the simulation.<p>
Objects are collected in a hierarchy of SimGroups and can be searched for by name or by object id.<h2><a class="anchor" name="SimPersistanceInspection"></a><a name = "HeaderLink5"></a>Persistence and Inspection</h2>
Objects in Torque can be saved to a script file using <a class="el" href="classSimObject.html#bbbdfdc7c7685f56e31e17d2ff28cbfe" title="Save object as a TorqueScript File.">SimObject::save()</a>. This basically dumps the current state of all the object's registered fields and dynamic fields, as well as, in the case of a <a class="el" href="classSimGroup.html" title="A group of SimObjects.">SimGroup</a>, all of that object's sub objects. GUIs and missions are examples of how the engine's editors save objects.<p>
Objects' fields can also be modified in-game using the inspector, which a GUI window that shows the fields of an object and allows those fields to be changed and saved. Before new field values are to be saved to an object its onPreApply() method will be called, then the fields will be changed, then the object's onPostApply() method will be called.<h2><a class="anchor" name="SimUsefulConsole"></a><a name = "HeaderLink6"></a>Useful Console Commands</h2>
There are several console commands that are useful to get an idea of what's going on in the system:<p>
<div class="fragment"><pre class="fragment">trace(<span class="keyword">true</span>);       <span class="comment">// Turns on console trace output, trace(false); to disable it.</span>
tree();            <span class="comment">// Displays a graphical hierarchy and object inspector for</span>
                   <span class="comment">// all objects currently registered in the system.</span>
<span class="keywordtype">object</span>.dump();     <span class="comment">// Dumps a list of all console commands and instance variables on an object.</span>
<span class="keyword">set</span>.listObjects(); <span class="comment">// Lists all of the objects in a set.</span>
</pre></div><h2><a class="anchor" name="SimDB"></a><a name = "HeaderLink7"></a>Container Database</h2>
<a class="el" href="classContainer.html">Container</a> maintains a database on both client and server for objects positioned in the simulation. It supports a set of functions for quickly inserting, removing and moving objects in the world (<a class="el" href="classContainer.html#c71ab627a68fe15685789181ce62ed6c">Container::addObject</a>, <a class="el" href="classContainer.html#3f5ffbfa01afed52e7a2717d5c549532">Container::removeObject</a>, <a class="el" href="classContainer.html#0b9d946f518a60b59d5b7336a1981b05" title="Checkbins makes sure that we're not just sticking the object right back where it...">Container::checkBins</a>), as well as query functions for line, box and polyhedron intersection tests (<a class="el" href="classContainer.html#2f23a565df232384f3a9e20fe98274ad">Container::castRay</a>, <a class="el" href="classContainer.html#7a640a1ded6a8d88f1037f02f864c3fd">Container::collideBox</a>, <a class="el" href="classContainer.html#20a1b0ecc9a0b65cd647705a620d5a53">Container::findObjects</a>).   </td>
</tr>
</table>

<br>
<br>
<hr width='50%' height=1 color=black>
<b>All Rights Reserved GarageGames.com, Inc. 1999-2005</b><br>
<small>Auto-magically Generated with <a href='http://www.doxygen.org/' target='_blank'>Doxygen</a></small>

</div>
<div class="footer">   <span class="copy">&copy; <a href="http://www.garagegames.com/">GarageGames.com</a></span>   <a href="../../../content_welcome.html" target="">Home</a>   <a href="#">Back to Top</a></div></body>

<!-- Mirrored from docs.garagegames.com/tge/official/content/documentation/Engine/Reference/Simulation.html by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 06 Dec 2017 21:22:23 GMT -->
</html>
